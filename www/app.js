(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){},125:function(e,t,n){},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaRecorderOptions=function(){var e={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error(e.mimeType+" is not Supported"),e={mimeType:""})));return e}},66:function(e,t,n){e.exports=n(67)},67:function(e,t,n){"use strict";var r=s(n(2)),a=s(n(70)),o=s(n(129)),i=s(n(17));n(78);var l=s(n(79));n(119),n(121),n(123),n(125),n(127);var u=n(128);function s(e){return e&&e.__esModule?e:{default:e}}o.default.use(i.default);var c=function(){var e=document.getElementById("app");a.default.render(r.default.createElement(u.AppContainer,null,r.default.createElement(l.default,null)),e)};window.cordova?document.addEventListener("deviceready",function(){var e=cordova.plugins.permissions,t=[e.CAMERA,e.RECORD_AUDIO];e.checkPermission(t,function(n){n.hasPermission?(console.log("Permission already granted. Starting react."),c()):e.requestPermissions(t,function(e){console.log("Permission granted. Starting react."),c()},function(){console.warn("Camera and/or Audio permission is not turned on")})},function(){console.warn("Camera and/or Audio permission is not turned on")})},!1):c()},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={id:"com.perdis.prototype",name:"PerDis Prototype",theme:"auto",routes:o.default,data:function(){return{SERVER:"ubistudies.com",PORT:"8000",CONTACT_EMAIL:"U2FsdGVkX19mfX61lfutSWMU/RswHMXhcF/8yUMUeXxLJYLjByso6IvDmy2NjlSg",SECRETKEY:"8723ikhgjsKJDH*&#IU#JR#(UFDJSDG337hgea"}}};return r.default.createElement(a.App,{params:t},r.default.createElement(a.Statusbar,null),r.default.createElement(a.View,{id:"main-view",url:"/",main:!0,className:"ios-edges"}),r.default.createElement(i.default,{id:"popup"}))};var r=l(n(2)),a=n(17),o=l(n(80)),i=l(n(94));function l(e){return e&&e.__esModule?e:{default:e}}},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(81)),a=i(n(92)),o=i(n(93));function i(e){return e&&e.__esModule?e:{default:e}}t.default=[{path:"/",component:r.default},{path:"/about/",component:a.default},{path:"(.*)",component:o.default}]},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n(2)),o=(p(n(82)),n(17)),i=(n(46),p(n(83))),l=p(n(85)),u=p(n(86)),s=p(n(87)),c=p(n(88)),d=p(n(89)),f=p(n(90)),m=p(n(91));function p(e){return e&&e.__esModule?e:{default:e}}var h={imgstyle:{maxWidth:"50px",maxHeight:"50px",marginRight:"10px",border:"1px solid #FFFFFF"},submitButton:{textTransform:"uppercase"},navLoader:{marginRight:"10px"},feedback:{textAlign:"center",align:"center"}},b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mySocket=null,n.state={artwork:null,feedback:null,connectionError:!1,error:null},n.refresh=n.refresh.bind(n),n.renderFeedback=n.renderFeedback.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentWillMount",value:function(){var e=this.$f7.data,t=e.SERVER,n=e.PORT;this.mySocket=new WebSocket("ws://"+t+":"+n+"/"),this.mySocket.onopen=function(e){console.info("WS: WebSocket connection established"),console.info("WS: syncing initial"),this.send("sync")},this.mySocket.onmessage=function(e){if("end"===e.data);else{var t=JSON.parse(e.data);console.log("WS: received: ",t),this.setState({artwork:t.artwork,feedback:t.feedback})}}.bind(this),this.mySocket.onerror=function(e){console.error("WS: WebSocket connection error:",e),this.setState({connectionError:!0})}.bind(this)}},{key:"componentWillUnmount",value:function(){this.mySocket&&this.mySocket.close()}},{key:"refresh",value:function(e){return this.mySocket?(console.log("Sending feedback:",e),this.mySocket.send(JSON.stringify(e)),!0):(console.error("Can't send feedback - no WebSocket connection"),!1)}},{key:"renderFeedback",value:function(){var e=this.state,t=e.feedback,n=e.artwork;if(!t||!t.type||!n)return null;var r=n.id;switch(console.log("render feedback:",t.type),t.type){case"image":return a.default.createElement(i.default,{artworkID:r,feedback:t,send:this.refresh});case"video":return a.default.createElement(l.default,{artworkID:r,feedback:t,send:this.refresh});case"reaction":return a.default.createElement(u.default,{artworkID:r,feedback:t,send:this.refresh});case"question":return a.default.createElement(s.default,{artworkID:r,feedback:t,send:this.refresh});case"answer":return a.default.createElement(c.default,{artworkID:r,feedback:t,send:this.refresh});case"likert":return a.default.createElement(d.default,{artworkID:r,feedback:t,send:this.refresh});case"multiplechoice":return a.default.createElement(m.default,{artworkID:r,feedback:t,send:this.refresh});case"vote":return a.default.createElement(f.default,{artworkID:r,feedback:t,send:this.refresh})}return console.error("unknown feedback.type",t.type),null}},{key:"render",value:function(){var e=this.state,t=e.artwork,n=(e.feedback,e.connectionError),r=this.$f7.data,i=r.SERVER,l=r.PORT;return a.default.createElement(o.Page,null,a.default.createElement(o.Navbar,null,a.default.createElement(o.NavLeft,null,a.default.createElement(o.Link,{popupOpen:"#popup"},a.default.createElement(o.Icon,{f7:"help_round"}))),a.default.createElement(o.NavTitle,null,"Provide your feedback!"),a.default.createElement(o.NavRight,null,t&&t.src?a.default.createElement("img",{alt:"Image",src:t.src,style:h.imgstyle}):a.default.createElement(o.Preloader,{style:h.navLoader,size:42}))),t?a.default.createElement(o.Block,{style:{textAlign:"center"}},a.default.createElement("h1",null,'"',t.title,'" ',a.default.createElement("span",{style:{fontWeight:"normal"}},"by")," ",t.artist)):a.default.createElement(o.Block,{style:{textAlign:"center"}},a.default.createElement("h2",null,"Connecting to WebSocket Server"),a.default.createElement(o.Preloader,{style:h.navLoader,size:42})),a.default.createElement(o.Block,{style:h.feedback},this.renderFeedback()),n&&a.default.createElement(o.Block,{style:{textAlign:"center"}},a.default.createElement(o.BlockTitle,null,"WEBSOCKET CONNECTION ERROR"),a.default.createElement("p",null,"Could not connect to ws://",i,":",l)))}}]),t}();t.default=b},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(2)),o=n(17),i=n(46),l=u(n(84));function u(e){return e&&e.__esModule?e:{default:e}}var s={video:{width:"240px",height:"160px",border:"1px solid #000000",marginRight:"10px",backgroundColor:"#303030"},img:{width:"240px",height:"160px",border:"1px solid #000000",marginLeft:"10px",backgroundColor:"#303030"},mobileImg:{margin:"1em",maxWidth:"100px",height:"auto",align:"center"},center:{textAlign:"center"}},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={submitBtnDisabled:!0,errorMsg:null,image:null},n.videoRef=a.default.createRef(),n.canvasRef=a.default.createRef(),n.submit=n.submit.bind(n),n.onCaptureClick=n.onCaptureClick.bind(n),n.resetCapture=n.resetCapture.bind(n),n.getPicture=n.getPicture.bind(n),n.nativeCameraSuccess=n.nativeCameraSuccess.bind(n),n.nativeCameraError=n.nativeCameraError.bind(n),n.activateWebStream=n.activateWebStream.bind(n),n.handleStreamSuccess=n.handleStreamSuccess.bind(n),n.handleStreamError=n.handleStreamError.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){console.log("submitting feedback");var e=this.props;(0,e.send)({type:"image",id:e.artworkID,payload:this.state.image})&&this.resetCapture()}},{key:"activateWebStream",value:function(){console.log("activateWebStream");this.videoRef.current,window.canvas=this.canvasRef.current;navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(this.handleStreamSuccess).catch(this.handleStreamError)}},{key:"handleStreamSuccess",value:function(e){window.stream=e,this.videoRef.current.srcObject=e}},{key:"handleStreamError",value:function(e){console.error("navigator.getUserMedia error [%s]: ",e.code,e.name,e.message);var t=e.name;"NotSupportedError"==e.name&&(t="Browser Not Supported"),this.setState({errorMsg:t+": "+e.message})}},{key:"getPicture",value:function(){navigator.camera.Direction.FRONT,navigator.camera.DestinationType.FILE_URI;navigator.camera.getPicture(this.nativeCameraSuccess,this.nativeCameraError)}},{key:"nativeCameraSuccess",value:function(e){console.log(e),this.setState({submitBtnDisabled:!1,image:e})}},{key:"nativeCameraError",value:function(e){console.error("Failed: "+e),this.setState({submitBtnDisabled:!0})}},{key:"onCaptureClick",value:function(){if(i.Device.desktop){var e=this.videoRef.current,t=this.canvasRef.current;t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var n=this.canvasRef.current.toDataURL("image/jpeg");this.setState({image:n,submitBtnDisabled:!1})}else this.getPicture()}},{key:"resetCapture",value:function(){if(i.Device.desktop){var e=this.canvasRef.current;e.getContext("2d").clearRect(0,0,e.width,e.height)}this.setState({image:null,submitBtnDisabled:!0})}},{key:"componentDidMount",value:function(){console.log("Device",i.Device),i.Device.desktop&&this.activateWebStream()}},{key:"render",value:function(){var e=this.state,t=e.submitBtnDisabled,n=e.errorMsg,r=e.image;return a.default.createElement(o.Block,{id:"webcam-video"},a.default.createElement("p",null,"Send a selfie to the artist!"),i.Device.desktop&&a.default.createElement(o.Block,null,a.default.createElement("video",{id:"video",ref:this.videoRef,style:s.video,autoPlay:"autoplay",playsInline:!0}),a.default.createElement("canvas",{id:"canvas",ref:this.canvasRef,style:s.img})),!i.Device.desktop&&r&&a.default.createElement("div",{style:s.center},a.default.createElement("img",{src:r,style:s.mobileImg,alt:""})),a.default.createElement("div",{style:{display:n?"block":"none"},id:"errorMsg"},n),a.default.createElement(l.default,{buttonText:"Take Picture",icon:"camera_round",onCaptureClick:this.onCaptureClick}),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"20"}),a.default.createElement(o.Col,{width:"60"},a.default.createElement(o.Button,{fill:!0,disabled:t,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"20"})),a.default.createElement("div",null,"Clicking this button will submit your image to the artist"))}}]),t}();t.default=c},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),a=n(17);t.default=function(e){return r.default.createElement(a.Block,null,r.default.createElement(a.Button,{onClick:e.onCaptureClick,outline:!0},r.default.createElement(a.Icon,{f7:e.icon})," ",e.buttonText))}},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17),i=n(55);var l={audio:!1,video:{facingMode:"user",width:1280,height:720}},u=function(){return a.default.createElement("span",null,a.default.createElement(o.Icon,{fa:"dot-circle"})," Start Recording")},s=function(){return a.default.createElement("span",null,a.default.createElement(o.Icon,{fa:"stop-circle"})," Stop Recording")},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.recordedBlobs=[],n.mediaSource=new MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen,!1),n.mediaRecorder,n.sourceBuffer,n.stream,n.state={buttonTxt:a.default.createElement(u,null),buttonAction:n.start,submitBtnDisabled:!0,artworkID:!1,isRecording:!1},n.videoRef=a.default.createRef(),n.recordedRef=a.default.createRef(),n.submit=n.submit.bind(n),n.activateStream=n.activateStream.bind(n),n.handleGetUserMediaSuccess=n.handleGetUserMediaSuccess.bind(n),n.handleGetUserMediaError=n.handleGetUserMediaError.bind(n),n.start=n.start.bind(n),n.stop=n.stop.bind(n),n.play=n.play.bind(n),n.handleDataAvailable=n.handleDataAvailable.bind(n),n.handleSourceOpen=n.handleSourceOpen.bind(n),n.state.buttonAction=n.state.buttonAction.bind(n),n.enableSubmitBtn=n.enableSubmitBtn.bind(n),n.resetVideo=n.resetVideo.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){var e=this.props,t=e.send,n={type:"video",id:e.artworkID},r=new Blob(this.recordedBlobs,{type:"video/webm"});n.payload=r,t(n)&&this.resetVideo()}},{key:"enableSubmitBtn",value:function(){this.setState({submitBtnDisabled:!1})}},{key:"resetVideo",value:function(){this.stream=null,this.recordedBlobs=[],this.sourceBuffer=null;var e=this.videoRef.current;e.src=null,e.srcObject=null;var t=this.recordedRef.current;t.src=null,t.srcObject=null,this.setState({isRecording:!1})}},{key:"handleSourceOpen",value:function(e){console.log("MediaSource opened");var t=(0,i.getMediaRecorderOptions)();this.sourceBuffer=this.mediaSource.addSourceBuffer(t),console.log("Source buffer: ",this.sourceBuffer)}},{key:"componentWillReceiveProps",value:function(e){console.info("componentWillReceiveProps"),this.state.artworkID&&e.artworkID===this.state.artworkID||(this.setState({artworkID:e.artworkID}),this.activateStream())}},{key:"activateStream",value:function(){console.log("activateStream"),navigator.mediaDevices.getUserMedia(l).then(this.handleGetUserMediaSuccess).catch(this.handleGetUserMediaError)}},{key:"handleGetUserMediaSuccess",value:function(e){console.log("getUserMedia() got stream:",e),this.stream=e;var t=this.videoRef.current;t.controls=!1;try{t.srcObject=e}catch(n){t.src=window.URL.createObjectURL(e)}}},{key:"handleGetUserMediaError",value:function(e){console.error("navigator.getUserMedia error: ",e),this.setState({isRecording:!1})}},{key:"handleDataAvailable",value:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)}},{key:"start",value:function(){var e=(0,i.getMediaRecorderOptions)();this.recordedBlobs=[];try{this.mediaRecorder=new MediaRecorder(this.stream,e)}catch(e){return void console.error("Exception while creating MediaRecorder:",e)}console.log("Created MediaRecorder",this.mediaRecorder,"with options",e),this.mediaRecorder.onstop=function(e){console.log("Recorder stopped: ",e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable,this.mediaRecorder.start(10),console.log("MediaRecorder started",this.mediaRecorder),this.setState({buttonTxt:a.default.createElement(s,null),buttonAction:this.stop,isRecording:!0})}},{key:"stop",value:function(){this.mediaRecorder.stop(),this.setState({buttonTxt:a.default.createElement(u,null),buttonAction:this.start,isRecording:!1}),this.play(),this.enableSubmitBtn()}},{key:"play",value:function(){var e=this.recordedRef.current,t=new Blob(this.recordedBlobs,{type:"video/webm"});e.src=null,e.srcObject=null;try{e.srcObject=t}catch(n){e.src=window.URL.createObjectURL(t)}e.onloadedmetadata=function(t){console.log("video loaded",t),e.controls=!0,e.play()}}},{key:"componentDidMount",value:function(){this.activateStream()}},{key:"render",value:function(){var e=this.state.isRecording;return a.default.createElement(o.Block,{id:"webcam-video"},a.default.createElement("p",null,"Send a selfie video to the artist!"),a.default.createElement(o.Block,{style:{display:e?"block":"none"}},a.default.createElement("video",{id:"video",ref:this.videoRef,style:{maxHeight:"250px",width:"auto",maxWidth:"100%",border:e?"3px solid red":"3px solid #303030",backgroundColor:"#303030"},playsInline:!0,autoPlay:!0,muted:!0})),a.default.createElement(o.Block,{style:{display:e&&this.recordedBlobs.length>0?"none":"block"}},a.default.createElement("video",{id:"recorded",ref:this.recordedRef,style:{maxHeight:"250px",width:"auto",maxWidth:"100%",border:"1px solid #000000",backgroundColor:"#303030"},playsInline:!0,autoPlay:!0,loop:!0,muted:!0})),a.default.createElement("div",{id:"errorMsg"}),a.default.createElement(o.Block,null,a.default.createElement(o.Button,{outline:!0,onClick:this.state.buttonAction},this.state.buttonTxt)),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,onClick:this.submit,disabled:this.state.submitBtnDisabled},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your video to the artist"))}}]),t}();t.default=c},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17),i=(n(46),n(55));var l={video:{maxWidth:"100%",border:"1px solid #000000",marginLeft:"10px",backgroundColor:"#303030"}},u={audio:!1,video:{facingMode:"user",width:1280,height:720}},s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.recordedBlobs=[],n.mediaSource=new MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen,!1),n.mediaRecorder,n.sourceBuffer,n.stream,n.state={submitBtnDisabled:!0,videoVisible:!1,artworkID:!1},n.recordedRef=a.default.createRef(),n.submit=n.submit.bind(n),n.skip=n.skip.bind(n),n.activateStream=n.activateStream.bind(n),n.handleStreamSuccess=n.handleStreamSuccess.bind(n),n.handleStreamError=n.handleStreamError.bind(n),n.resetVideo=n.resetVideo.bind(n),n.playBack=n.playBack.bind(n),n.stop=n.stop.bind(n),n.startTimer=n.startTimer.bind(n),n.startBuffer=n.startBuffer.bind(n),n.handleDataAvailable=n.handleDataAvailable.bind(n),n.handleSourceOpen=n.handleSourceOpen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){console.info("componentWillReceiveProps"),this.state.artworkID&&e.artworkID===this.state.artworkID||(this.setState({artworkID:e.artworkID}),this.activateStream())}},{key:"submit",value:function(){var e=this.props,t=e.send,n={type:"reaction",id:e.artworkID},r=(0,i.getMediaRecorderOptions)(),a=new Blob(this.recordedBlobs,r);n.payload=a,t(n),this.resetVideo()}},{key:"skip",value:function(){var e=this.props,t=e.send,n={type:"reaction",id:e.artworkID,payload:"skip"};t(n),this.resetVideo()}},{key:"startTimer",value:function(){var e=this;setTimeout(function(){console.log("this.mediaRecorder",e.mediaRecorder),e.mediaRecorder.stop(),console.log("this.stream",e.stream);var t=e.stream.getTracks();console.log("tracks",t);for(var n=0;n<t.length;n++)t[n].stop();e.setState({videoVisible:!0,submitBtnDisabled:!1}),e.playBack()},3e3)}},{key:"handleSourceOpen",value:function(e){console.log("MediaSource opened"),this.sourceBuffer=this.mediaSource.addSourceBuffer('video/webm; codecs="vp8"'),console.log("Source buffer: ",this.sourceBuffer)}},{key:"resetVideo",value:function(){this.stream=null,this.recordedBlobs=[],this.sourceBuffer=null;var e=this.recordedRef.current;e.srcObject=null,e.src=null,e.controls=!1,this.setState({videoVisible:!1})}},{key:"activateStream",value:function(){navigator.mediaDevices.getUserMedia(u).then(this.handleStreamSuccess).catch(this.handleStreamError)}},{key:"handleStreamSuccess",value:function(e){console.log("getUserMedia() got stream:",e),this.stream=e,this.startBuffer(),this.startTimer()}},{key:"handleStreamError",value:function(e){console.error("navigator.getUserMedia error: ",e),console.log(e.code,e.name,e.message)}},{key:"handleDataAvailable",value:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)}},{key:"startBuffer",value:function(){this.recordedRef.current;var e=(0,i.getMediaRecorderOptions)();try{this.mediaRecorder=new MediaRecorder(this.stream,e)}catch(e){return void console.error("Exception while creating MediaRecorder:",e)}console.log("Created MediaRecorder",this.mediaRecorder,"with options",e),this.mediaRecorder.onstop=function(e){console.log("Recorder stopped: ",e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable,this.mediaRecorder.start(10),console.log("MediaRecorder started",this.mediaRecorder)}},{key:"playBack",value:function(){var e=this.recordedRef.current,t=new Blob(this.recordedBlobs,{type:"video/webm"});console.log("this.stream",this.stream),e.src=null,e.srcObject=null;try{e.srcObject=t}catch(n){e.src=window.URL.createObjectURL(t)}e.onloadedmetadata=function(t){console.log("video loaded",t),e.controls=!0,e.play()}}},{key:"stop",value:function(){}},{key:"componentDidMount",value:function(){this.activateStream()}},{key:"render",value:function(){var e=this.state.videoVisible;return a.default.createElement(o.Block,{id:"webcam-video"},a.default.createElement(o.Block,{style:{display:e?"block":"none"}},a.default.createElement("video",{style:l.video,id:"recorded",ref:this.recordedRef,muted:!0,loop:!0,autoplay:!0})),a.default.createElement("div",{id:"errorMsg"}),a.default.createElement(o.Block,{style:{margin:"10em 0",display:e?"none":"block"}},a.default.createElement("h1",null,"Look at the artwork!"),a.default.createElement(o.Preloader,{color:"black",size:"50"})),a.default.createElement(o.Block,{style:{display:e?"block":"none"}},a.default.createElement("h1",null,"We recorded your reaction to this artwork."),a.default.createElement("h2",null,"Submit the reaction to the artist?")),a.default.createElement(o.Block,{style:{display:e?"block":"none"}},a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"20"}),a.default.createElement(o.Col,{width:"30"},a.default.createElement(o.Button,{fill:!0,onClick:this.submit,disabled:this.state.submitBtnDisabled},"Submit")),a.default.createElement(o.Col,{width:"30"},a.default.createElement(o.Button,{fill:!0,onClick:this.skip},"Skip")),a.default.createElement(o.Col,{width:"20"})),a.default.createElement("div",null,"Clicking the submit button will submit your video to the artist")))}}]),t}();t.default=s},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={submitBtnDisabled:!0,question:""},n.resetInput=n.resetInput.bind(n),n.submit=n.submit.bind(n),n.enableSubmitBtn=n.enableSubmitBtn.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){var e=this.props,t=e.send,n=e.artworkID;t({type:"question",payload:this.state.question,id:n})&&this.resetInput()}},{key:"resetInput",value:function(){this.setState({question:"",submitBtnDisabled:!0})}},{key:"enableSubmitBtn",value:function(e){var t=e.target.value;t?this.setState({submitBtnDisabled:!1,question:t}):this.setState({submitBtnDisabled:!0,question:""})}},{key:"render",value:function(){var e=this.state,t=e.question,n=e.submitBtnDisabled;return a.default.createElement(o.Block,null,a.default.createElement("h2",null,"Ask the artist a question"),a.default.createElement(o.List,{noHairlines:!0},a.default.createElement(o.Input,{id:"question",type:"text",onChange:this.enableSubmitBtn,onInputClear:this.resetInput,placeholder:"Enter your question here",clearButton:!0,value:t})),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,disabled:n,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your answer to the artist"))}}]),t}();t.default=i},88:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={submitBtnDisabled:!0,answer:""},n.resetInput=n.resetInput.bind(n),n.submit=n.submit.bind(n),n.enableSubmitBtn=n.enableSubmitBtn.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){var e=this.props,t=e.send,n=e.artworkID;t({type:"answer",payload:this.state.answer,id:n})&&this.resetInput()}},{key:"resetInput",value:function(){this.setState({answer:"",submitBtnDisabled:!0})}},{key:"enableSubmitBtn",value:function(e){e.target.value?this.setState({submitBtnDisabled:!1,answer:e.target.value}):this.setState({submitBtnDisabled:!0,answer:""})}},{key:"render",value:function(){var e=this.state,t=e.answer,n=e.submitBtnDisabled,r=this.props.feedback;return a.default.createElement(o.Block,null,a.default.createElement("h2",null,r.instructions),a.default.createElement("p",null,r.content),a.default.createElement(o.List,{noHairlines:!0},a.default.createElement(o.Input,{id:"question",type:"textarea",clearButton:!0,placeholder:"Enter your answer here",onChange:this.enableSubmitBtn,onInputClear:this.resetInput,value:t})),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,disabled:n,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your answer to the artist"))}}]),t}();t.default=i},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17);var i={leftDescr:{textAlign:"right"},rightDescr:{textAlign:"left"}},l={min:1,max:5,step:1};l.initial=(l.max-l.min)/2+1;var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedOption:null,sliderValue:l.initial},n.submit=n.submit.bind(n),n.handleSliderChange=n.handleSliderChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){var e=this.props,t=e.send,n=e.artworkID;t({type:"likert",payload:this.state.sliderValue,id:n})&&this.setState({sliderValue:l.initial})}},{key:"handleSliderChange",value:function(e){console.log("Slider changed to %s",e),this.setState({sliderValue:e})}},{key:"render",value:function(){var e=this.props.feedback,t=this.state,n=(t.selectedOption,t.sliderValue);return a.default.createElement(o.Block,null,a.default.createElement("h2",null,"Answer this question from the artist:"),a.default.createElement("p",null,e.content),a.default.createElement(o.BlockTitle,null,"Choose your answer"),a.default.createElement(o.Block,null,a.default.createElement(o.Row,null,a.default.createElement(o.Col,{style:i.leftDescr,width:"15"},"Strongly Disagree (",l.min,")"),a.default.createElement(o.Col,{width:"70"},a.default.createElement(o.Range,{label:!0,draggableBar:!0,onRangeChanged:this.handleSliderChange,min:l.min,max:l.max,step:l.step,value:n})),a.default.createElement(o.Col,{style:i.rightDescr,width:"15"},"Strongly Agree (",l.max,")"))),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your answer to the artist"))}}]),t}();t.default=u},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17);var i={voteItem:{padding:"30px",cursor:"pointer"}},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:!1,showSubmitButton:!1},n.voteDown=n.voteDown.bind(n),n.voteUp=n.voteUp.bind(n),n.resetInput=n.resetInput.bind(n),n.submit=n.submit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"voteDown",value:function(){console.log("clicked down"),this.setState({selected:"down",showSubmitButton:!0})}},{key:"voteUp",value:function(){console.log("clicked up"),this.setState({selected:"up",showSubmitButton:!0})}},{key:"resetInput",value:function(){this.setState({selected:!1})}},{key:"submit",value:function(){var e=this.props,t=e.send,n=e.artworkID;t({type:"vote",payload:this.state.selected,id:n})&&this.resetInput()}},{key:"render",value:function(){var e=this.props.feedback,t=this.state,n=t.selected,r=t.showSubmitButton;return a.default.createElement(o.Block,{id:"vote"},a.default.createElement("h2",null,e.instructions),a.default.createElement(o.Block,null,a.default.createElement("span",{onClick:this.voteDown},a.default.createElement(o.Icon,{id:"down",style:i.voteItem,fa:"thumbs-down",tooltip:"Dislike",size:250,color:"down"===n?"red":"blue"})),a.default.createElement("span",{onClick:this.voteUp},a.default.createElement(o.Icon,{id:"up",style:i.voteItem,fa:"thumbs-up",size:250,tooltip:"Like",color:"up"===n?"red":"blue"}))),a.default.createElement(o.Block,{style:{display:r?"block":"none"}},a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your answer to the artist")))}}]),t}();t.default=l},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o=n(17);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedOption:null},n.resetInput=n.resetInput.bind(n),n.submit=n.submit.bind(n),n.enableSubmitBtn=n.enableSubmitBtn.bind(n),n.setValue=n.setValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"submit",value:function(){var e=this.props,t=e.send,n=e.artworkID;t({type:"likert",payload:this.state.selectedOption,id:n})&&this.resetInput()}},{key:"enableSubmitBtn",value:function(e){this.setState({selectedOption:e.target.value})}},{key:"setValue",value:function(e){}},{key:"resetInput",value:function(){this.setState({selectedOption:null})}},{key:"render",value:function(){var e=this.props.feedback,t=this.state.selectedOption;return a.default.createElement(o.Block,null,a.default.createElement("h2",null,"Answer this question from the artist:"),a.default.createElement("p",null,e.content),a.default.createElement(o.BlockTitle,null,"Choose one answer"),a.default.createElement(o.List,null,a.default.createElement(o.ListItem,{onChange:this.enableSubmitBtn,radio:!0,required:!0,value:"Books",title:"Books",name:"choice"}),a.default.createElement(o.ListItem,{onChange:this.enableSubmitBtn,radio:!0,required:!0,value:"Movies",title:"Movies",name:"choice"}),a.default.createElement(o.ListItem,{onChange:this.enableSubmitBtn,radio:!0,required:!0,value:"Food",title:"Food",name:"choice"}),a.default.createElement(o.ListItem,{onChange:this.enableSubmitBtn,radio:!0,required:!0,value:"Drinks",title:"Drinks",name:"choice"})),a.default.createElement(o.Row,null,a.default.createElement(o.Col,{width:"33"}),a.default.createElement(o.Col,{width:"33"},a.default.createElement(o.Button,{fill:!0,disabled:!t,onClick:this.submit},"Submit")),a.default.createElement(o.Col,{width:"33"})),a.default.createElement("div",null,"Clicking this button will submit your answer to the artist"))}}]),t}();t.default=i},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),a=n(17);t.default=function(){return r.default.createElement(a.Page,null,r.default.createElement(a.Navbar,{title:"About",backLink:"Back"}),r.default.createElement(a.BlockTitle,null,"About My App"),r.default.createElement(a.Block,{strong:!0},r.default.createElement("p",null,"Here is About page!"),r.default.createElement("p",null,"You can go ",r.default.createElement(a.Link,{back:!0},"back"),"."),r.default.createElement("p",null,"Mauris posuere sit amet metus id venenatis. Ut ante dolor, tempor nec commodo rutrum, varius at sem. Nullam ac nisi non neque ornare pretium. Nulla mauris mauris, consequat et elementum sit amet, egestas sed orci. In hac habitasse platea dictumst."),r.default.createElement("p",null,"Fusce eros lectus, accumsan eget mi vel, iaculis tincidunt felis. Nulla tincidunt pharetra sagittis. Fusce in felis eros. Nulla sit amet aliquam lorem, et gravida ipsum. Mauris consectetur nisl non sollicitudin tristique. Praesent vitae metus ac quam rhoncus mattis vel et nisi. Aenean aliquet, felis quis dignissim iaculis, lectus quam tincidunt ligula, et venenatis turpis risus sed lorem. Morbi eu metus elit. Ut vel diam dolor.")))}},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),a=n(17);t.default=function(){return r.default.createElement(a.Page,null,r.default.createElement(a.Navbar,{title:"Not found",backLink:"Back"}),r.default.createElement(a.Block,{strong:!0},r.default.createElement("p",null,"Sorry"),r.default.createElement("p",null,"Requested content not found.")))}},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(2)),o=n(17);i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={contactaddress:"TODO"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.contactaddress;return a.default.createElement(o.Popup,{id:"popup",tabletFullscreen:!1},a.default.createElement(o.View,null,a.default.createElement(o.Page,null,a.default.createElement(o.Navbar,{title:"About"},a.default.createElement(o.NavRight,null,a.default.createElement(o.Link,{popupClose:!0},a.default.createElement(o.Icon,{f7:"close"})))),a.default.createElement(o.Block,null,a.default.createElement(o.BlockTitle,null,"View artworks and provide feedback!"),a.default.createElement(o.Block,null,"An art installation by researchers from the",a.default.createElement("br",null),"Center for Ubiquitous Computing",a.default.createElement("br",null),"University of Oulu"),a.default.createElement(o.BlockTitle,null,"How it works"),a.default.createElement(o.Block,null,"We invited artists to showcase their artworks in this installation. One artwork is showing on the main screen in front of you. Each artwork is accompanied with a way for you to provide feedback, as chosen by the respective artist.",a.default.createElement("br",null),"All submitted feedback is sent to the respective artists."),a.default.createElement(o.BlockTitle,null,"Privacy Policy"),a.default.createElement(o.Block,null,"Your data will be shared with the artist who uploaded the artwork to this installation.",a.default.createElement("br",null),"For further question, contact ",e,".")))))}}]),t}();t.default=l}},[[66,2,1]]]);